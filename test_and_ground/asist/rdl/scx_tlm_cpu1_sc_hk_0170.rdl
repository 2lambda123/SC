!==============================================================================
!
!                Originator: W. Moleski
!                Responsible SC:  
!                Responsible CSE: 
!                Rev:  Last Change: Oct 25 2017

!
!                    Telemetry Packet # 0170 (dec)
!                 =================================
!
!       Packet Application ID: 0170 (Hex '00AA')
!       Packet Title:  SCX CPU1 SC Telemetry Data Packet
!       Packet Length:  ?? Bytes (Including 12 Bytes Of Header)
!	Collect             Frequency:         SEC
!
!       REFERENCES:
!
!       NOTES:
!
!       HISTORY: 
!  2011/07/05  WFM      : Updated according to fsw changes
!  2012/01/19  WFM      : Added record and union types for the RTS Execution
!			: status and Disabled status arrays so that discrete
!			: values can be displayed
!
!	2017/10/25	: Created from template 'template_tlm_SC_HK_TLM.rdl'
!	with parameters spacecraft='SCX' and processor='CPU1'.
!==============================================================================
!
#include "sc_platform_cfg.h"

#define RTS_STATUS_SIZE (SC_NUMBER_OF_RTS/16)
#define SC_NUMBER_OF_ATS 2

TYPES
  RECORD SCX_CPU1_SC_RTSExeStatusType  DESC="RTS Execution Status Record"
     UNION RTSStatusEntry  DESC="SCX CPU1 SC RTS Status Entry"
       UI AllStatus     DESC="16-bit value for status of 16 RTSs"
       UI RTS1Status    DESC="Status of the RTS represented by bit 0",
			mask=%x0001,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS2Status    DESC="Status of the RTS represented by bit 1",
			mask=%x0002,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS3Status    DESC="Status of the RTS represented by bit 2",
			mask=%x0004,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS4Status    DESC="Status of the RTS represented by bit 3",
			mask=%x0008,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS5Status    DESC="Status of the RTS represented by bit 4",
			mask=%x0010,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS6Status    DESC="Status of the RTS represented by bit 5",
			mask=%x0020,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS7Status    DESC="Status of the RTS represented by bit 6",
			mask=%x0040,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS8Status    DESC="Status of the RTS represented by bit 7",
			mask=%x0080,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS9Status    DESC="Status of the RTS represented by bit 8",
			mask=%x0100,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS10Status   DESC="Status of the RTS represented by bit 9",
			mask=%x0200,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS11Status   DESC="Status of the RTS represented by bit 10",
			mask=%x0400,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS12Status   DESC="Status of the RTS represented by bit 11",
			mask=%x0800,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS13Status   DESC="Status of the RTS represented by bit 12",
			mask=%x1000,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS14Status   DESC="Status of the RTS represented by bit 13",
			mask=%x2000,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS15Status   DESC="Status of the RTS represented by bit 14",
			mask=%x4000,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
       UI RTS16Status   DESC="Status of the RTS represented by bit 15",
			mask=%x8000,DISCRETE,DRANGE=(0,1),
			DLABEL=("Idle","Executing")
     END
  END

  RECORD SCX_CPU1_SC_RTSDisStatusType  DESC="RTS Disabled Status Record"
     UNION RTSStatusEntry  DESC="SCX CPU1 SC RTS Status Entry"
       UI AllStatus     DESC="16-bit value for status of 16 RTSs"
       UI RTS1Status    DESC="Status of the RTS represented by bit 0",
			mask=%x0001,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS2Status    DESC="Status of the RTS represented by bit 1",
			mask=%x0002,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS3Status    DESC="Status of the RTS represented by bit 2",
			mask=%x0004,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS4Status    DESC="Status of the RTS represented by bit 3",
			mask=%x0008,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS5Status    DESC="Status of the RTS represented by bit 4",
			mask=%x0010,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS6Status    DESC="Status of the RTS represented by bit 5",
			mask=%x0020,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS7Status    DESC="Status of the RTS represented by bit 6",
			mask=%x0040,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS8Status    DESC="Status of the RTS represented by bit 7",
			mask=%x0080,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS9Status    DESC="Status of the RTS represented by bit 8",
			mask=%x0100,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS10Status   DESC="Status of the RTS represented by bit 9",
			mask=%x0200,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS11Status   DESC="Status of the RTS represented by bit 10",
			mask=%x0400,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS12Status   DESC="Status of the RTS represented by bit 11",
			mask=%x0800,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS13Status   DESC="Status of the RTS represented by bit 12",
			mask=%x1000,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS14Status   DESC="Status of the RTS represented by bit 13",
			mask=%x2000,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS15Status   DESC="Status of the RTS represented by bit 14",
			mask=%x4000,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
       UI RTS16Status   DESC="Status of the RTS represented by bit 15",
			mask=%x8000,DISCRETE,DRANGE=(0,1),
			DLABEL=("Enabled","Disabled")
     END
  END
END_TYPES

PACKET P00AA APID=0170, DESC="SCX CPU1 SC Telemetry Data Packet",
                        STALE = 36
#include "ccsds_header.rdl"
!
  UB   SCX_CPU1_SC_ATSNumber   DESC="SCX CPU1 SC Current ATS number",
                               DISCRETE, DRANGE=(0,1,2),
			       DLABEL=("None","ATS A","ATS B")
!
  UB   SCX_CPU1_SC_ATPState    DESC="SCX CPU1 SC Current ATP State",
                               DISCRETE, DRANGE=(0,1,2,3,4,5,6,7,8),
			       DLABEL=("Empty","Loaded","Idle","Executed","Skipped","Executing","Failed Checksum", "Failed Distribution", "Starting")
!
  UB   SCX_CPU1_SC_ContATSFlag DESC="SCX CPU1 SC ATS Continue on Failure Flag",
                               DISCRETE, DRANGE=(0,1),
			       DLABEL=("Disabled","Enabled")
!
  UB   SCX_CPU1_SC_CMDEC       DESC="SCX CPU1 SC Command Error Counter",
                               UNITS=Counts, YH=1, DOLIMIT
!
  UB   SCX_CPU1_SC_CMDPC       DESC="SCX CPU1 SC Command Processed Counter",
                               UNITS=Counts
!
  UB   SCX_CPU1_SC_FillByte    DESC="SCX CPU1 SC spare for alignment"
!
  UI   SCX_CPU1_SC_SwitchPend  DESC="SCX CPU1 SC ATS Switch Pending Flag",
                               DISCRETE, DRANGE=(0,1), DLABEL=("No","Yes")
!
  UI   SCX_CPU1_SC_ActiveRTSs  DESC="SCX CPU1 SC Active RTS count"
!
  UI   SCX_CPU1_SC_NextRTS     DESC="SCX CPU1 SC next RTS to execute"
!
  UI   SCX_CPU1_SC_RTSActvCtr  DESC="SCX CPU1 SC The number of RTSs started without errors"
!
  UI   SCX_CPU1_SC_RTSActvErr  DESC="SCX CPU1 SC The number of RTSs that failed to start"
!
  UI   SCX_CPU1_SC_ATSCmdCtr   DESC="SCX CPU1 SC The number of commands sent by the current ATS"
!
  UI   SCX_CPU1_SC_ATSErrCtr   DESC="SCX CPU1 SC The number of command errors caused by the current ATS"
!
  UI   SCX_CPU1_SC_RTSCmdCtr   DESC="SCX CPU1 SC The total number of commands sent by all active RTSs"
!
  UI   SCX_CPU1_SC_RTSErrCtr   DESC="SCX CPU1 SC The number of command errors caused by all active RTSs"
!
  UI   SCX_CPU1_SC_LastATSErr  DESC="SCX CPU1 SC The Last ATS that contained an error",
                               DISCRETE, DRANGE=(0,1,2),
			       DLABEL=("None","ATS A","ATS B")
!
  UI   SCX_CPU1_SC_LastATSCmdErr DESC="SCX CPU1 SC The last ATS command that caused an error"
!
  UI   SCX_CPU1_SC_LastRTSErr DESC="SCX CPU1 SC The last RTS that contained an error"
!
  UI   SCX_CPU1_SC_LastRTSCmdErr DESC="SCX CPU1 SC The last RTS command that caused an error"
!
  UI   SCX_CPU1_SC_AppendAtsID   DESC="The ATS ID from the most recent Append ATS command",
                               DISCRETE, DRANGE=(0,1,2),
			       DLABEL=("None","ATS A","ATS B")
!
  UI   SCX_CPU1_SC_AppendCount   DESC="The number of command entries in the current Append ATS Table"
!
  UI   SCX_CPU1_SC_AppendSize    DESC="The size of the entries in the current Append ATS Table"
!
  UI   SCX_CPU1_SC_AppendLoads   DESC="The total number of Append ATS table loads performed"
!
  ULI  SCX_CPU1_SC_ATPCmdNumber DESC="SCX CPU1 SC current ATS command number"
!
  ULI  SCX_CPU1_SC_FreeBytes[SC_NUMBER_OF_ATS] DESC="SCX CPU1 SC The free bytes contained in each ATS"
!
  ULI  SCX_CPU1_SC_NextRTSTime DESC="SCX CPU1 SC The absolute time of the next RTS command"
!
  ULI  SCX_CPU1_SC_NextATSTime DESC="SCX CPU1 SC The absolute time of the next ATS command"
!
!  UI  SCX_CPU1_SC_RTSExeStatus[RTS_STATUS_SIZE] DESC="SCX CPU1 SC The execution status (in bits) of each RTS"
  SCX_CPU1_SC_RTSExeStatusType SCX_CPU1_SC_RTSExeStatus[RTS_STATUS_SIZE] DESC="SCX CPU1 SC The execution status of each RTS"
!
!  UI  SCX_CPU1_SC_RTSDisableStatus[RTS_STATUS_SIZE] DESC="SCX CPU1 SC The disabled status (in bits) of each RTS"
  SCX_CPU1_SC_RTSDisStatusType SCX_CPU1_SC_RTSDisableStatus[RTS_STATUS_SIZE] DESC="SCX CPU1 SC The disabled status of each RTS"
!
!  END                !END APPEND RECORD FUNCTION
!
END
